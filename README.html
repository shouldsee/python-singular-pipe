

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>spiper: Utilities to make a pipeline, with singularity integration and caching ability. &mdash; spiper 0.1.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> spiper
          

          
          </a>

          
            
            
              <div class="version">
                0.1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="install/index.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">2. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="lib/index.html">3. API</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexes.html">4. Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">5. 0.1.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html#id2">6. 0.1.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html#id3">7. 0.1.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html#id4">8. 0.1.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html#id5">9. 0.1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html#id6">10. 0.0.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html#id7">11. 0.0.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html#id8">12. 0.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html#id9">13. 0.0.6</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">spiper</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>spiper: Utilities to make a pipeline, with singularity integration and caching ability.</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <a class="reference external image-reference" href="https://travis-ci.com/shouldsee/spiper"><img alt="Build Status" src="https://travis-ci.com/shouldsee/spiper.svg?branch=master" /></a>
<div class="section" id="spiper-utilities-to-make-a-pipeline-with-singularity-integration-and-caching-ability">
<h1>spiper: Utilities to make a pipeline, with singularity integration and caching ability.<a class="headerlink" href="#spiper-utilities-to-make-a-pipeline-with-singularity-integration-and-caching-ability" title="Permalink to this headline">¶</a></h1>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Written with sphinx. See <a class="reference external" href="https://shouldsee.github.io/spiper/">https://shouldsee.github.io/spiper/</a></p>
</div>
<div class="section" id="dependencies">
<h2>Dependencies:<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>A pip manager compatible with PEP 508 URL requirements see <a class="reference external" href="https://www.python.org/dev/peps/pep-0508/#examples">examples</a>:</p>
<ul>
<li><p>For python3, this means <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">pip&gt;=19.0</span></code> (see pip3 <a class="reference external" href="https://pip.pypa.io/en/stable/news/#id245">changelog</a>)</p></li>
<li><p>For python2, err python2 is not yet supported</p></li>
</ul>
</li>
<li><p>Optional: singularity &gt;= 3.5.3 to use <code class="docutils literal notranslate"><span class="pre">spiper.types.LoggedSingularityExecCommand()</span></code>. (try to install with <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">install_singular.sh</span> <span class="pre">/opt/singularity</span></code>, assuming ubuntu and use sudo for apt packages)</p></li>
<li><p>Optional: dot binary for plotting graphs with <code class="docutils literal notranslate"><span class="pre">spiper.graph.plot_simple_graph()</span></code>.(try install with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">-y</span> <span class="pre">graphviz</span></code>)</p></li>
<li><p>see requirements.txt</p></li>
</ul>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install spiper@https://github.com/shouldsee/spiper/tarball/master --user
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage:<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Version:spiper-0.1.4

Usage

    <span class="sb">``</span>spiper &lt;subcommand&gt; &lt;package&gt; &lt;workflow_entrypoint&gt; &lt;workflow_arguments&gt;<span class="sb">``</span>

Example::

    spiper run <span class="se">\</span>
      spiper_mock_flow@https://github.com/shouldsee/spiper_mock_flow/tarball/master <span class="se">\</span>
      spiper_mock_flow:run_and_backup <span class="se">\</span>
      /tmp/test_remote/root <span class="m">1</span> <span class="m">2</span> /tmp/test_remote/root.backup

Arguments:
    &lt;subcommand&gt;:
        run                  execute the workflow
        get_all_files        print all files governed by workflow
            --plain          print a newline-separated list instead of pprint

        get_changed_files    print all files changed by workflow
            --plain          print a newline-separated list instead of pprint

        caller_show_deps     print all dependencies governed by workflow <span class="o">(</span>legacy: get_all_deps<span class="o">)</span>
            --plain          print a newline-separated list instead of pprint
            --which_flow     printing which subflow/node requries this dependency

        caller_show_log      print details of a call, including <span class="sb">`</span>arg_tuples,sourcecode,sourcefile<span class="sb">`</span>
            --plain

        file_show_deps       print dependencies of parent <span class="nb">caller</span> <span class="k">for</span> a file
            --plain
            --which_flow

        file_show_log        print details of parent <span class="nb">caller</span>
            --plain

    &lt;package&gt;:
        a string compatible with pep-508
    &lt;workflow_entrypoint&gt;:
        a string  <span class="s2">&quot;&lt;module&gt;:&lt;object_name&gt;&quot;</span> where object is like a <span class="sb">`</span>spipe.types.Node<span class="o">()</span><span class="sb">`</span>
    &lt;workflow_arguments&gt;:
        a comma-separated list of arguments <span class="k">for</span> the workflow

Options:
    --help: show this <span class="nb">help</span>
</pre></div>
</div>
</div>
<div class="section" id="running-a-remote-pipeline">
<h2>Running a remote pipeline<a class="headerlink" href="#running-a-remote-pipeline" title="Permalink to this headline">¶</a></h2>
<p>Pipeline living at <a class="reference external" href="https://github.com/shouldsee/spiper_mock_flow">https://github.com/shouldsee/spiper_mock_flow</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">### [pybash-0.0.5]</span>
<span class="c1">### [sys.argv] /home/user/.local/lib/python3.5/site-packages/pybash.py --log-stdout</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
set<span class="se">\</span>
  -euo<span class="se">\</span>
  pipefail<span class="p">;</span>
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
<span class="nv">commit</span><span class="o">=</span>7c317b
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  get_changed_files<span class="se">\</span>
  spiper_mock_flow@https://github.com/shouldsee/spiper_mock_flow/tarball/<span class="nv">$commit</span><span class="se">\</span>
  spiper_mock_flow:run_and_backup<span class="se">\</span>
  /tmp/test_remote/root<span class="se">\</span>
  <span class="m">1</span><span class="se">\</span>
  <span class="m">2</span><span class="se">\</span>
  /tmp/test_remote/root.backup
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">### [File(&#39;/tmp/test_remote/root.workflow.log&#39;),</span>
<span class="c1">###  File(&#39;/tmp/test_remote/root.backup.output..log&#39;)]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
<span class="nv">ARR</span><span class="o">=(</span>spiper_mock_flow@https://github.com/shouldsee/spiper_mock_flow/tarball/<span class="nv">$commit</span><span class="se">\</span>
  spiper_mock_flow:run_and_backup<span class="se">\</span>
  /tmp/test_remote/root<span class="se">\</span>
  <span class="m">1</span><span class="se">\</span>
  <span class="m">2</span><span class="se">\</span>
  /tmp/test_remote/root.backup<span class="se">\</span>
  <span class="o">)</span>
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  get_changed_files<span class="se">\</span>
  <span class="si">${</span><span class="nv">ARR</span><span class="p">[@]</span><span class="si">}</span>
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">### [File(&#39;/tmp/test_remote/root.workflow.log&#39;),</span>
<span class="c1">###  File(&#39;/tmp/test_remote/root.backup.output..log&#39;)]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  run<span class="se">\</span>
  <span class="si">${</span><span class="nv">ARR</span><span class="p">[@]</span><span class="si">}</span>
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  get_changed_files<span class="se">\</span>
  <span class="si">${</span><span class="nv">ARR</span><span class="p">[@]</span><span class="si">}</span>
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">### [File(&#39;/tmp/test_remote/root.workflow.log&#39;),</span>
<span class="c1">###  File(&#39;/tmp/test_remote/root.backup.output..log&#39;)]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  caller_show_deps<span class="se">\</span>
  <span class="si">${</span><span class="nv">ARR</span><span class="p">[@]</span><span class="si">}</span>
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">### [File(&#39;/home/user/.local/lib/python3.5/site-packages/spiper_mock_flow.py&#39;)]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  caller_show_deps<span class="se">\</span>
  --which_flow<span class="se">\</span>
  <span class="si">${</span><span class="nv">ARR</span><span class="p">[@]</span><span class="si">}</span>
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">###</span>
<span class="c1">### [Flow running] mock=None</span>
<span class="c1">### [workflow]done</span>
<span class="c1">### [(File(&#39;/home/user/.local/lib/python3.5/site-packages/spiper_mock_flow.py&#39;),</span>
<span class="c1">###   [File(&#39;spiper:///tmp/test_remote/root.source.py&#39;),</span>
<span class="c1">###    File(&#39;spiper:///tmp/test_remote/root.backup.source.py&#39;)])]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  file_show_deps<span class="se">\</span>
  /tmp/test_remote/root.transcribe.fasta
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">### /tmp/test_remote/root.transcribe.fasta</span>
<span class="c1">### [File(&#39;/tmp/test_remote/root.random_seq.seq&#39;)]</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  caller_show_log<span class="se">\</span>
  <span class="si">${</span><span class="nv">ARR</span><span class="p">[@]</span><span class="si">}</span><span class="se">\</span>
  --plain
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">### node:</span>
<span class="c1">###     prefix_named:</span>
<span class="c1">###         /tmp/test_remote/root.run_and_backup</span>
<span class="c1">###     job_type:</span>
<span class="c1">###         FlowFunction</span>
<span class="c1">###     will_change:</span>
<span class="c1">###         True, FlowFunction will always be executed</span>
<span class="c1">###     dotname:</span>
<span class="c1">###         spiper_mock_flow:run_and_backup</span>
<span class="c1">###     sourcefile:</span>
<span class="c1">###         /home/user/.local/lib/python3.5/site-packages/spiper_mock_flow.py</span>
<span class="c1">###     info_dict:</span>
<span class="c1">###         OrderedDict([(&#39;args_tuples&#39;,</span>
<span class="c1">###                       [&quot;[&#39;prefix&#39;       ,spiper._types.File            &quot;</span>
<span class="c1">###                        &quot;,File(&#39;/tmp/test_remote/root&#39;)]&quot;,</span>
<span class="c1">###                        &quot;[&#39;seed&#39;         ,builtins.int                  ,1]&quot;,</span>
<span class="c1">###                        &quot;[&#39;L&#39;            ,builtins.int                  ,2]&quot;,</span>
<span class="c1">###                        &quot;[&#39;backup_prefix&#39;,builtins.str                  &quot;</span>
<span class="c1">###                        &quot;,&#39;/tmp/test_remote/root.backup&#39;]&quot;,</span>
<span class="c1">###                        &quot;[&#39;_output&#39;      ,builtins.list                 ,[]]&quot;]),</span>
<span class="c1">###                      (&#39;code&#39;,</span>
<span class="c1">###                       &#39;&lt;code object run_and_backup at 0x7fe09f8a3ae0, file &#39;</span>
<span class="c1">###                       &#39;&quot;/home/user/.local/lib/python3.5/site-packages/spiper_mock_flow.py&quot;, &#39;</span>
<span class="c1">###                       &#39;line 133&gt;&#39;)])</span>
<span class="c1">###     sourcecode:</span>
<span class="c1">###         @Flow</span>
<span class="c1">###         def run_and_backup(</span>
<span class="c1">###                 self, prefix,</span>
<span class="c1">###                 seed=int, L=int,</span>
<span class="c1">###                 backup_prefix=str,  # we don&#39;t want to track backup_prefix</span>
<span class="c1">###                 _output=[</span>
<span class="c1">###                 # File(&#39;log&#39;),</span>
<span class="c1">###                 ]):</span>
<span class="c1">###</span>
<span class="c1">###             # execute the flow</span>
<span class="c1">###             flow = self.runner(workflow, prefix, seed, L)</span>
<span class="c1">###</span>
<span class="c1">###             # perform backup</span>
<span class="c1">###             backup_result = self.runner(backup, backup_prefix, flow)</span>
<span class="c1">###</span>
<span class="c1">###             # plot a dependency graph into the backup directory</span>
<span class="c1">###             graph_out = self.runner(plot_graph, backup_prefix, backup_result)</span>
<span class="c1">###             print(&#39;[workflow]done&#39;)</span>
<span class="c1">###             return self</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  file_show_log<span class="se">\</span>
  /tmp/test_remote/root.transcribe.fasta<span class="se">\</span>
  --plain
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">### file:</span>
<span class="c1">###     name:</span>
<span class="c1">###         /tmp/test_remote/root.transcribe.fasta</span>
<span class="c1">###     node:</span>
<span class="c1">###         prefix_named:</span>
<span class="c1">###             /tmp/test_remote/root.transcribe</span>
<span class="c1">###         job_type:</span>
<span class="c1">###             NodeFunction</span>
<span class="c1">###         will_change:</span>
<span class="c1">###             NA when viewing a node image</span>
<span class="c1">###         dotname:</span>
<span class="c1">###             spiper_mock_flow:transcribe</span>
<span class="c1">###         sourcefile:</span>
<span class="c1">###             /home/user/.local/lib/python3.5/site-packages/spiper_mock_flow.py</span>
<span class="c1">###         info_dict:</span>
<span class="c1">###             {&#39;args_tuples&#39;: [&quot;[&#39;prefix&#39;       ,spiper._types.File            &quot;</span>
<span class="c1">###                              &quot;,File(&#39;/tmp/test_remote/root&#39;)]&quot;,</span>
<span class="c1">###                              &quot;[&#39;input&#39;        ,spiper._types.File            &quot;</span>
<span class="c1">###                              &quot;,File(&#39;/tmp/test_remote/root.random_seq.seq&#39;)]&quot;,</span>
<span class="c1">###                              &quot;[&#39;_output&#39;      ,builtins.list                 ,[&#39;fasta&#39;]]&quot;],</span>
<span class="c1">###              &#39;code&#39;: &#39;&lt;code object transcribe at 0x7f7520f10390, file &#39;</span>
<span class="c1">###                      &#39;&quot;/home/user/.local/lib/python3.5/site-packages/spiper_mock_flow.py&quot;, &#39;</span>
<span class="c1">###                      &#39;line 23&gt;&#39;}</span>
<span class="c1">###         sourcecode:</span>
<span class="c1">###             def transcribe(self, prefix, input=File, _output=[&#39;fasta&#39;]):</span>
<span class="c1">###                 with open(input, &#39;r&#39;) as fi:</span>
<span class="c1">###                     with open(self.output.fasta, &#39;w&#39;) as fo:</span>
<span class="c1">###                         fo.write(fi.read().replace(&#39;T&#39;, &#39;U&#39;))</span>
<span class="c1">###                 return self</span>
<span class="c1">### ---------------</span>

<span class="c1">### ---------------</span>
<span class="c1">### [ command]</span>
spiper<span class="se">\</span>
  --help<span class="se">\</span>
  &gt;/dev/null
<span class="c1">###</span>
<span class="c1">### [  stdout]</span>
<span class="c1">### ---------------</span>
</pre></div>
</div>
</div>
<div class="section" id="todo">
<h2>ToDo<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>- [ ] Adding definition for other file operation:
    - node_clone     duplicate a node
      - node_detach    cache all dependencies of a node to local
      - node_cplink    create a spiper-synced sopy
    - node_mv        move a node and link meta to another location
    - file_clone      create a hardlink
      - file_cplink    create a spiper-synced copy
      - file_mirror
    - file_mv        move a file to another location
    - file_commit    commit manual changes to a file
    - file_pull
    - node_pull
- [ ] Adding file pointers between flow and subflow.
- [ ] print more logs during runtime.
- [ ] extensive tests for RPO().
    - [ ] Figure out how to avoid pip install
    - [ ] construct setup.py for single-file script
- [ ] Adding wrapper for WDL.
- [x] Running a remote module
    - [x] `spiper.mock.test_remote()` add some tests for spiper._types.PythonModule()
- [ ] use _header.resolve_piper(). Auto-backup all output files. job_backup_copy()
- [ ] [need:test] Adding Glob() and RecursiveGlob() to allow for easy file matching
- [ ] Add timed_run() to print out execution times for each job.
- [ ] Polish graph to have input-output node
- Ability to relocate nodes.
- [x] (see config_runner(tag=DirtyKey(&#39;Some tag&#39;)))(func, prefix) must be unique within each workflow
- [x] Added MyPickleSession to sniff python dependency. Use protocol 3 by default
- [ ] adds error tests for Caller.cache and Caller.__call__
- [ ] cache_run_deep() to compute a dynamic graph and recursively
    cache_run() from top to bottom.
- [x] (see `mock_run()`) Caller.method() to populate Caller.output() for constructing symbolic graphs.
- [x] In get_upstream()/get_downstream(), how to treat File that belongs to a Prefix?
    - [x] it should come with a pointer pointing back to the Prefix.
    - Prefix in get_input_identity() will be globbed and snapshotted
    - Prefix in get_upstream() will be treated as a standalone
    - If a File has been included in a OutputPrefix(),
- [x] fix get_upstream() if possible
- [x] test_loadable_subprocess() test the outputted caller_dump is loadable from other directories
- shellcmd
    - [x] capture stderr and stdout of subprocess.check_output(),
    - [x] logging the command executed into .cmd file
    - [x] with optional log file.
- [x] adding an outward_pk file to complement input_pk and auto-sync
    - the outward_pk should record identity of the output file and input file.
    - the input_ident is useful
- [x] produce a dependency graph
    - get_upstream_files()
    - get_downstream_nodes()
- [x] (Done as HttpResponse(),  ) Adding InputHTTP()
    - [ ] better subclassing requests.Request()?
- [ ] implements version_check when reading input_json / output_json
- [ ] Adding OutputHTTP() object
- [ ] (abandoned)import module from online.
- [ ] migrate valid cache folder and preserving inner dependency and re-connect cutted dependency
- [ ] implementing checks for output nodes to make sure Files.to_ident() are changed
</pre></div>
</div>
</div>
<div class="section" id="screenshots">
<h2>Screenshots<a class="headerlink" href="#screenshots" title="Permalink to this headline">¶</a></h2>
<a class="reference external image-reference" href="./tests/test_downstream.node_only.dot.svg"><img alt="" src="./tests/test_downstream.node_only.dot.svg" /></a>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Feng Geng

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>